<!-- =============================================================
     TITANIC SURVIVAL PREDICTOR FRONTEND
     Works with your FastAPI backend
============================================================== -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Titanic Survival Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #eef2f3;
            padding: 40px;
            display: flex;
            justify-content: center;
        }
        .container {
            width: 480px;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
            color: #333;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 6px;
            border: 1px solid #aaa;
        }
        button {
            margin-top: 15px;
            width: 100%;
            padding: 12px;
            background: #003366;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #002244;
        }
        .result-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f8f8;
            display: none;
        }
        .survived {
            color: green;
            font-weight: bold;
        }
        .not-survived {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Titanic Survival Prediction</h2>

    <label>Pclass</label>
    <select id="Pclass">
        <option value="1">1st Class</option>
        <option value="2">2nd Class</option>
        <option value="3" selected>3rd Class</option>
    </select>

    <label>Age</label>
    <input type="number" id="Age" placeholder="Enter Age">

    <label>Siblings/Spouse (SibSp)</label>
    <input type="number" id="SibSp" value="0">

    <label>Parents/Children (Parch)</label>
    <input type="number" id="Parch" value="0">

    <label>Fare</label>
    <input type="number" id="Fare" placeholder="Ticket Fare">

    <label>Sex</label>
    <select id="Sex_male">
        <option value="1">Male</option>
        <option value="0">Female</option>
    </select>

    <label>Embarked</label>
    <select id="Embarked">
        <option value="S">Southampton</option>
        <option value="Q">Queenstown</option>
        <option value="C">Cherbourg</option>
    </select>

    <button onclick="predict()">Predict</button>

    <div class="result-box" id="result"></div>
</div>


<script>
async function predict() {

    const embarked = document.getElementById("Embarked").value;

    let embarked_Q = embarked === "Q" ? 1 : 0;
    let embarked_S = embarked === "S" ? 1 : 0;

    let data = {
        Pclass: parseInt(document.getElementById("Pclass").value),
        Age: parseFloat(document.getElementById("Age").value),
        SibSp: parseInt(document.getElementById("SibSp").value),
        Parch: parseInt(document.getElementById("Parch").value),
        Fare: parseFloat(document.getElementById("Fare").value),
        Sex_male: parseInt(document.getElementById("Sex_male").value),
        Embarked_Q: embarked_Q,
        Embarked_S: embarked_S
    };

    const resultBox = document.getElementById("result");
    resultBox.style.display = "block";
    resultBox.innerHTML = "Predicting...";

    try {
        const response = await fetch("http://127.0.0.1:9000/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const result = await response.json();

        if (result.survived === 1) {
            resultBox.innerHTML = `
                <p class="survived">ðŸš¢ The passenger SURVIVED</p>
                <p>Probability: <b>${(result.survival_probability * 100).toFixed(2)}%</b></p>
            `;
        } else {
            resultBox.innerHTML = `
                <p class="not-survived">ðŸ’€ The passenger did NOT survive</p>
                <p>Probability: <b>${(result.survival_probability * 100).toFixed(2)}%</b></p>
            `;
        }

    } catch (error) {
        resultBox.innerHTML = "Error connecting to API.";
    }
}
</script>

</body>
</html>
